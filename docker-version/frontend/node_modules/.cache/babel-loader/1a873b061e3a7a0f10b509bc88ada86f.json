{"ast":null,"code":"var _jsxFileName = \"/home/user/IVAN/pryMovDev/reservation/src/components/home.js\";\nimport React, { Component, StyleSheet } from 'react';\nimport './home.css';\nimport logo from \"./logo.svg\";\nimport Login, { login } from './login';\n\nfunction LoadLogin(props) {\n  return /*#__PURE__*/React.createElement(Login, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 9\n    }\n  });\n}\n\nfunction EmptyP(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"posts-empty\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }\n  }, \"NO HAY POSTS\"));\n}\n\nfunction Post(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post\",\n    key: props.post.key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post-user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, props.post.username), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  }, props.post.posted), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post-post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, props.post.post));\n}\n\nfunction Posts(props) {\n  // var url = 'http://localhost:4500/posts.php';\n  const data = props.dat;\n\n  if (data == void 0 || data.length < 1) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(EmptyP, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, data.map(p => /*#__PURE__*/React.createElement(Post, {\n    post: p,\n    key: p.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 24\n    }\n  })));\n}\n\nfunction LoadHome(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, \"ReactBook\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    className: \"App-logo\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home-body-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    onClick: e => props.clickLogout(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 22\n    }\n  }, \"Log out\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home-body-newpost\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newpost\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    rows: \"6\",\n    cols: \"30\",\n    className: \"newpost-area\",\n    name: \"postArea\",\n    onChange: e => props.handlerArea(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newpost-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    name: \"postB\",\n    onClick: e => props.handlerPost(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 34\n    }\n  }, \"Post\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    name: \"clearB\",\n    onClick: e => props.handlerClear(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 34\n    }\n  }, \"Clear\"))))), /*#__PURE__*/React.createElement(Posts, {\n    dat: props.datas,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport default class home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      access: 'denied',\n      post: '',\n      username: \"\",\n      posts: [],\n      clicked: true,\n      logoutB: false\n    };\n    this.handlerClearClick = this.handlerClearClick.bind(this);\n    this.handlerPostClick = this.handlerPostClick.bind(this);\n    this.postChangeHandler = this.postChangeHandler.bind(this);\n    this.handleLogoutClick = this.handleLogoutClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPosts();\n  }\n\n  handleLogoutClick() {\n    this.setState(state => ({\n      logoutB: !this.state.logoutB\n    }));\n  }\n\n  async getPosts() {\n    var url = 'http://localhost:4500/posts.php';\n    this.setState({\n      loading: true\n    });\n    await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Access-Control-Allow-Origin': 'http://localhost:4500/posts.php',\n        'Accept': 'application/json',\n        //'text/plain',\n        'Connection': 'keep-alive',\n        'Origin': 'http://localhost:3000'\n      },\n      mode: 'cors',\n      Connection: 'keep'\n    }).then(response => response.json().then(res => {\n      this.setState({\n        posts: res\n      });\n      console.log(this.state.posts);\n      this.setState({\n        loading: false\n      });\n    })).catch(error => {\n      var res = {};\n      this.setState({\n        posts: null\n      });\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  postChangeHandler(event) {\n    // this.setState({\n    //   [event.target.name]:event.target.value\n    // })\n    const x = document.getElementsByName(\"postArea\")[0].value;\n    this.setState(state => ({\n      post: x\n    })); // console.log(this.state.post);\n  }\n\n  async handlerPostClick(e) {\n    this.setState(state => ({\n      loading: true\n    }));\n    var url = 'http://localhost:4500/post.php'; // var url = 'http://172.19.0.3:4500/login.php';\n\n    await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Access-Control-Allow-Origin': 'http://localhost:4500/post.php',\n        'Accept': 'application/json',\n        //'application/json',\n        'Content-Type': 'application/json',\n        'Connection': 'keep-alive',\n        'Origin': 'http://localhost:3000'\n      },\n      mode: 'cors',\n      Connection: 'keep',\n      body: JSON.stringify({\n        username: 'ivanMed2',\n        //pasar user desde login\n        post: this.state.post\n      })\n    }).then(response => response.text().then(res => {\n      console.log(res);\n      this.setState({\n        loading: false\n      });\n      this.getPosts();\n      document.getElementsByName(\"postArea\")[0].value = '';\n    })).catch(error => {\n      //   var res={};\n      //   this.setState({posts:null});     \n      console.log(error);\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  handlerClearClick(e) {\n    this.setState(state => ({\n      clicked: !state.clicked\n    }));\n    document.getElementsByName(\"postArea\")[0].value = '';\n    console.log(this.state.clicked);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 13\n      }\n    }, !this.state.logoutB ? /*#__PURE__*/React.createElement(LoadHome, {\n      datas: this.state.posts,\n      handlerClear: this.handlerClearClick,\n      handlerPost: this.handlerPostClick,\n      handlerArea: this.postChangeHandler,\n      clickLogout: this.handleLogoutClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }\n    }) : /*#__PURE__*/React.createElement(LoadLogin, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n;","map":{"version":3,"sources":["/home/user/IVAN/pryMovDev/reservation/src/components/home.js"],"names":["React","Component","StyleSheet","Login","login","LoadLogin","props","EmptyP","Post","post","key","username","posted","Posts","data","dat","length","map","p","id","LoadHome","logo","e","clickLogout","handlerArea","handlerPost","handlerClear","datas","home","constructor","state","loading","access","posts","clicked","logoutB","handlerClearClick","bind","handlerPostClick","postChangeHandler","handleLogoutClick","componentDidMount","getPosts","setState","url","fetch","method","headers","mode","Connection","then","response","json","res","console","log","catch","error","event","x","document","getElementsByName","value","body","JSON","stringify","text","render"],"mappings":"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","sourcesContent":["import React, { Component, StyleSheet } from 'react';\nimport './home.css';\nimport logo from './logo.svg';\nimport Login,{login} from './login';\n\n\nfunction LoadLogin(props){\n    return (\n  \n        <Login/>\n        \n        );    \n}\n\n\n\nfunction EmptyP(props){\n\n\n    return(\n\n        <div className=\"posts-empty\"> \n            <span>NO HAY POSTS</span>\n        </div>\n\n\n    );\n\n}\n\nfunction Post(props){\n    \n\n    return(\n        \n        <div className=\"post\" key={props.post.key}>\n            <div className='post-user'>{props.post.username}</div>\n            <div className='post-date'>{props.post.posted}</div>\n            <div className='post-post'>{props.post.post}</div>\n        </div>\n\n    );\n}\n\n\nfunction Posts(props){\n\n\n    // var url = 'http://localhost:4500/posts.php';\n\n\n    const data=props.dat;\n\n    \n    if(data==void(0) || data.length<1)\n    {\n        return (\n            <div>\n                <EmptyP/>\n            </div>            \n        );\n    }\n\n    \n    \n    return(    \n        \n        <div className=\"post-div\">\n        {data.map(p => <Post post={p} key={p.id}/>)}\n        \n        </div>\n        \n\n\n    );\n}\n\nfunction LoadHome(props){\n\n    return(\n        <div className=\"home\">\n        <div className=\"home-header\">\n          <h2>ReactBook</h2>\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />   \n\n        </div>\n        <div className=\"home-body\">\n            <div className=\"home-body-header\"> \n                <div><a href='#' onClick={e => props.clickLogout(e)}>Log out</a></div> \n\n           </div>\n            <div className=\"home-body-newpost\"> \n                <div className=\"newpost\">           \n                        <textarea  rows=\"6\" cols=\"30\" className=\"newpost-area\" name=\"postArea\" onChange={e=>props.handlerArea(e)}/>\n                        <div className=\"newpost-options\">\n                            <div><button type=\"button\" name=\"postB\"  onClick={e=>props.handlerPost(e)}>Post</button ></div> \n                            <div><button type=\"button\" name=\"clearB\" onClick={e=>props.handlerClear(e)}>Clear</button></div>                    \n                        </div>\n                </div> \n            </div>\n\n                <Posts dat={props.datas}/>\n\n\n        </div>\n        <div className=\"home-footer\">\n\n        </div>\n      </div>\n);\n\n}\n\n\n\n\n\n\n\nexport default class home extends Component {\n  \n\n    constructor(props){\n        super(props);\n        this.state={\n          \n          loading:false,\n          access:'denied',\n          post:'',\n          username:\"\",\n          posts:[],      \n          clicked:true,\n          logoutB:false,\n          \n        }\n        this.handlerClearClick= this.handlerClearClick.bind(this);\n        this.handlerPostClick=this.handlerPostClick.bind(this);\n        this.postChangeHandler=this.postChangeHandler.bind(this);\n        this.handleLogoutClick= this.handleLogoutClick.bind(this);\n\n      }\n   \n      componentDidMount(){\n          this.getPosts();\n      }\n\n    handleLogoutClick() {\n  \n    this.setState(state => ({\n\n        logoutB: !this.state.logoutB\n    }));\n\n    }\n   \n   \n    async getPosts(){\n\n\n        var url = 'http://localhost:4500/posts.php';\n        this.setState({loading:true})    \n    \n    \n        await fetch(url, {   \n    \n            method: 'POST',\n            headers: \n            {\n                'Access-Control-Allow-Origin': 'http://localhost:4500/posts.php',\n                'Accept': 'application/json',//'text/plain',\n                'Connection': 'keep-alive',\n                'Origin':'http://localhost:3000',\n            },\n            mode:'cors',\n            Connection:'keep',\n\n    \n        })\n        .then(response => response.json()\n        .then(res=>{\n    \n\n              this.setState({posts:res});     \n              console.log(this.state.posts);  \n              this.setState({loading:false});\n\n      \n         }))\n         .catch(error => {\n          var res={};\n          this.setState({posts:null});     \n\n          this.setState({loading:false})    \n        });\n\n    }\n\n    postChangeHandler(event){\n  \n        // this.setState({\n        //   [event.target.name]:event.target.value\n        // })\n        const x=document.getElementsByName(\"postArea\")[0].value;\n        this.setState(state => ({\n    \n            post:x,\n\n  \n        }));\n\n        // console.log(this.state.post);\n     \n    }\n\n    \n    async handlerPostClick(e) {\n\n\n\n  \n        this.setState(state => ({\n    \n          loading:true,\n\n        }));\n\n        var url = 'http://localhost:4500/post.php';\n\n        // var url = 'http://172.19.0.3:4500/login.php';\n          \n        await fetch(url, {   \n    \n            method: 'POST',\n            headers: \n            {\n                'Access-Control-Allow-Origin': 'http://localhost:4500/post.php',\n                'Accept': 'application/json',//'application/json',\n                'Content-Type' : 'application/json',\n                'Connection': 'keep-alive',\n                'Origin':'http://localhost:3000'\n\n            },\n            mode:'cors',\n            Connection:'keep',\n            body: JSON.stringify({ username: 'ivanMed2', //pasar user desde login\n                post: this.state.post}),\n        \n    \n        })\n        .then(response => response.text()\n        .then(res=>{\n    \n\n            console.log(res);        \n            this.setState({loading:false})\n            this.getPosts();\n            document.getElementsByName(\"postArea\")[0].value='';\n\n         }))\n         .catch(error => {\n        //   var res={};\n \n        //   this.setState({posts:null});     \n            console.log(error)\n           this.setState({loading:false})   \n        });\n\n    }\n\n\n\n    handlerClearClick(e) {\n\n        this.setState(state => ({\n\n        clicked: !state.clicked\n        \n\n    }));\n        document.getElementsByName(\"postArea\")[0].value='';\n        console.log(this.state.clicked);\n    }\n    \n       \n\n    render(){\n        return (\n            \n            <div>\n            {\n                !this.state.logoutB ? \n                <LoadHome datas={this.state.posts} handlerClear={this.handlerClearClick } \n                handlerPost={this.handlerPostClick} handlerArea={this.postChangeHandler}\n                clickLogout={this.handleLogoutClick}/>\n                :\n                <LoadLogin/>\n\n            }\n            </div>\n            \n\n\n        );\n    }\n\n};\n\n"]},"metadata":{},"sourceType":"module"}