{"ast":null,"code":"var _jsxFileName = \"/home/user/IVAN/pryMovDev/reservation/src/components/login.js\";\nimport React, { Component } from 'react';\nimport './login.css';\nimport logo from \"./logo.svg\";\nimport Signup, { signup } from './signup';\nimport Home from './home';\n\nfunction LoadSign(props) {\n  return /*#__PURE__*/React.createElement(Signup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 5\n    }\n  });\n}\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }\n  }, \"Holita\"));\n}\n\nfunction LoadLogin(props) {\n  if (props.theAccess != 'sucessful') {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }\n    }, \"LOGIN\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      action: \"localhost:4500/login.php\",\n      method: \"post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"username\",\n      onChange: props.saveText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      onChange: props.saveText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      onClick: e => props.sendLog(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      onClick: props.loadSign,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, \"Sign up\")), /*#__PURE__*/React.createElement(\"div\", {\n      classname: \"access\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, props.accessD));\n  } else {\n    return /*#__PURE__*/React.createElement(Home, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    });\n  }\n}\n\nexport default class login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      access: 'denied',\n      message: '',\n      username: \"\",\n      password: \"\",\n      clicked: true\n    };\n    this.handleSignupClick = this.handleSignupClick.bind(this);\n    this.ChangeHandler = this.ChangeHandler.bind(this);\n    this.sendLogin = this.sendLogin.bind(this);\n  }\n\n  async sendLogin(event) {\n    //deberia tener await?\n    event.preventDefault();\n    this.setState({\n      loading: true\n    });\n    let formData = new FormData();\n    formData.append('username', this.state.username);\n    formData.append('password', this.state.password);\n    var url = 'http://localhost:4500/login.php'; // var url = 'http://172.19.0.3:4500/login.php';\n\n    await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Access-Control-Allow-Origin': 'http://localhost:4500',\n        'Accept': 'application/json',\n        //'text/plain',\n        'Connection': 'keep-alive'\n      },\n      mode: 'cors',\n      Connection: 'keep',\n      body: formData\n    }).then(response => response.json().then(res => {\n      this.setState({\n        access: res.access\n      });\n      this.setState({\n        message: res.message\n      });\n      this.setState({\n        loading: false\n      });\n      alert(this.state.message);\n    })).catch(error => {\n      var res = {\n        access: false,\n        message: error\n      };\n      this.setState({\n        access: res.access\n      });\n      this.setState({\n        message: res.message\n      });\n      this.setState({\n        loading: false\n      });\n      alert(this.state.message);\n    });\n  }\n\n  handleSignupClick() {\n    this.setState(state => ({\n      clicked: !state.clicked\n    }));\n  }\n\n  ChangeHandler(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    }); // {this.state.clicked ?  <LoadLogin loadSign={this.handleSignupClick} saveText={this.ChangeHandler} sendLog={this.sendLogin} /> :<LoadSign/>}    \n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 7\n      }\n    }, !this.state.clicked ? /*#__PURE__*/React.createElement(LoadSign, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }) : this.state.access == 'successful' ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Home, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 16\n      }\n    })) : /*#__PURE__*/React.createElement(LoadLogin, {\n      loadSign: this.handleSignupClick,\n      saveText: this.ChangeHandler,\n      sendLog: this.sendLogin,\n      theAccess: this.state.access,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/user/IVAN/pryMovDev/reservation/src/components/login.js"],"names":["React","Component","Signup","signup","Home","LoadSign","props","Alert","LoadLogin","theAccess","logo","saveText","e","sendLog","loadSign","accessD","login","constructor","state","loading","access","message","username","password","clicked","handleSignupClick","bind","ChangeHandler","sendLogin","event","preventDefault","setState","formData","FormData","append","url","fetch","method","headers","mode","Connection","body","then","response","json","res","alert","catch","error","target","name","value","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAO,aAAP;;AAEA,OAAOC,MAAP,IAAeC,MAAf,QAA4B,UAA5B;AACA,OAAOC,IAAP,MAAiB,QAAjB;;AAGA,SAASC,QAAT,CAAkBC,KAAlB,EAAwB;AAGtB,sBAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF;AAKD;;AAED,SAASC,KAAT,CAAeD,KAAf,EAAqB;AAGnB,sBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAFF;AAOD;;AAGD,SAASE,SAAT,CAAmBF,KAAnB,EAAyB;AAGvB,MAAGA,KAAK,CAACG,SAAN,IAAiB,WAApB,EAAgC;AAC9B,wBAGE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAEC,IAAV;AAAgB,MAAA,SAAS,EAAC,UAA1B;AAAqC,MAAA,GAAG,EAAC,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF,CADF,eAKE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,MAAM,EAAC,0BAAb;AAAwC,MAAA,MAAM,EAAC,MAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAEA;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,IAAI,EAAC,UAAxB;AAAmC,MAAA,QAAQ,EAAEJ,KAAK,CAACK,QAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJA,eAKA;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,UAA5B;AAAuC,MAAA,QAAQ,EAAEL,KAAK,CAACK,QAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALA,eAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANA,eAOA;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,QAA3B;AAAoC,MAAA,OAAO,EAAEC,CAAC,IAAIN,KAAK,CAACO,OAAN,CAAcD,CAAd,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPA,CADF,CALF,eAgBE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,IAAI,EAAC,GAAR;AAAY,MAAA,OAAO,EAAEN,KAAK,CAACQ,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CAhBF,eAqBE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACOR,KAAK,CAACS,OADb,CArBF,CAHF;AA8BD,GA/BD,MAgCI;AACF,wBAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF;AAKD;AAEF;;AAGD,eAAe,MAAMC,KAAN,SAAoBf,SAApB,CAA6B;AAE1CgB,EAAAA,WAAW,CAACX,KAAD,EAAO;AAChB,UAAMA,KAAN;AACA,SAAKY,KAAL,GAAW;AACTC,MAAAA,OAAO,EAAC,KADC;AAETC,MAAAA,MAAM,EAAC,QAFE;AAGTC,MAAAA,OAAO,EAAC,EAHC;AAITC,MAAAA,QAAQ,EAAC,EAJA;AAKTC,MAAAA,QAAQ,EAAC,EALA;AAMTC,MAAAA,OAAO,EAAC;AANC,KAAX;AAQA,SAAKC,iBAAL,GAAwB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAxB;AACA,SAAKC,aAAL,GAAmB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAAnB;AACA,SAAKE,SAAL,GAAe,KAAKA,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAf;AAED;;AAKD,QAAME,SAAN,CAAgBC,KAAhB,EAAsB;AAAE;AACtBA,IAAAA,KAAK,CAACC,cAAN;AACA,SAAKC,QAAL,CAAc;AAACZ,MAAAA,OAAO,EAAC;AAAT,KAAd;AACA,QAAIa,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B,KAAKhB,KAAL,CAAWI,QAAvC;AACAU,IAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4B,KAAKhB,KAAL,CAAWK,QAAvC;AAGA,QAAIY,GAAG,GAAG,iCAAV,CARoB,CAUpB;;AAEA,UAAMC,KAAK,CAACD,GAAD,EAAM;AAEbE,MAAAA,MAAM,EAAE,MAFK;AAGbC,MAAAA,OAAO,EACP;AACI,uCAA+B,uBADnC;AAEI,kBAAU,kBAFd;AAEiC;AAC7B,sBAAc;AAHlB,OAJa;AASbC,MAAAA,IAAI,EAAC,MATQ;AAUbC,MAAAA,UAAU,EAAC,MAVE;AAWbC,MAAAA,IAAI,EAACT;AAXQ,KAAN,CAAL,CAaLU,IAbK,CAaAC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,GACjBF,IADiB,CACZG,GAAG,IAAE;AAEL,WAAKd,QAAL,CAAc;AAACX,QAAAA,MAAM,EAACyB,GAAG,CAACzB;AAAZ,OAAd;AACA,WAAKW,QAAL,CAAc;AAACV,QAAAA,OAAO,EAACwB,GAAG,CAACxB;AAAb,OAAd;AACA,WAAKU,QAAL,CAAc;AAACZ,QAAAA,OAAO,EAAC;AAAT,OAAd;AACA2B,MAAAA,KAAK,CAAC,KAAK5B,KAAL,CAAWG,OAAZ,CAAL;AACD,KAPa,CAbZ,EAqBJ0B,KArBI,CAqBEC,KAAK,IAAI;AACf,UAAIH,GAAG,GAAC;AAACzB,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,OAAO,EAAE2B;AAAzB,OAAR;AACA,WAAKjB,QAAL,CAAc;AAACX,QAAAA,MAAM,EAACyB,GAAG,CAACzB;AAAZ,OAAd;AACA,WAAKW,QAAL,CAAc;AAACV,QAAAA,OAAO,EAACwB,GAAG,CAACxB;AAAb,OAAd;AACA,WAAKU,QAAL,CAAc;AAACZ,QAAAA,OAAO,EAAC;AAAT,OAAd;AACA2B,MAAAA,KAAK,CAAC,KAAK5B,KAAL,CAAWG,OAAZ,CAAL;AACD,KA3BK,CAAN;AA8BD;;AAEDI,EAAAA,iBAAiB,GAAG;AAElB,SAAKM,QAAL,CAAcb,KAAK,KAAK;AAEtBM,MAAAA,OAAO,EAAE,CAACN,KAAK,CAACM;AAFM,KAAL,CAAnB;AAKD;;AAGDG,EAAAA,aAAa,CAACE,KAAD,EAAO;AAIlB,SAAKE,QAAL,CAAc;AACZ,OAACF,KAAK,CAACoB,MAAN,CAAaC,IAAd,GAAoBrB,KAAK,CAACoB,MAAN,CAAaE;AADrB,KAAd,EAJkB,CAOlB;AAID;;AAMDC,EAAAA,MAAM,GAAE;AAGR,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,CAAC,KAAKlC,KAAL,CAAWM,OAAZ,gBACC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAEE,KAAKN,KAAL,CAAWE,MAAX,IAAmB,YAAnB,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAK,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAL,CADD,gBAEC,oBAAC,SAAD;AACA,MAAA,QAAQ,EAAE,KAAKK,iBADf;AAEA,MAAA,QAAQ,EAAE,KAAKE,aAFf;AAGA,MAAA,OAAO,EAAE,KAAKC,SAHd;AAIA,MAAA,SAAS,EAAE,KAAKV,KAAL,CAAWE,MAJtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,CADJ;AA0BC;;AAzHyC","sourcesContent":["import React, {Component} from 'react';\nimport './login.css';\nimport logo from './logo.svg';\nimport Signup,{signup} from './signup';\nimport Home from './home';\n\n\nfunction LoadSign(props){\n\n\n  return (\n  \n    <Signup/>\n    \n    );\n}\n\nfunction Alert(props){\n\n\n  return (\n  \n    <div>\n      <h1>Holita</h1>\n    </div>\n    \n    );\n}\n\n\nfunction LoadLogin(props){\n\n\n  if(props.theAccess!='sucessful'){\n    return (      \n\n\n      <div className=\"login\">\n        <div className=\"login-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <h2>LOGIN</h2>    \n        </div>\n        <div className=\"login-body\">\n          <form action=\"localhost:4500/login.php\" method=\"post\">\n          <label>Username</label>\n          <input type=\"text\" name=\"username\" onChange={props.saveText}/>\n          <br/>\n          <label>Password</label>\n          <input type=\"password\" name=\"password\" onChange={props.saveText}/>\n          <br/>\n          <input type=\"submit\" value=\"Submit\" onClick={e => props.sendLog(e)} />\n          </form>\n        </div>\n        <div className=\"login-footer\">\n          <a href=\"#\" onClick={props.loadSign}>\n              Sign up\n          </a>\n        </div>\n        <div classname=\"access\">\n              {props.accessD}\n        </div>  \n      </div>\n    );\n\n  }\n  else{\n    return(\n\n      <Home/>\n\n    );\n  }\n\n}\n    \n    \nexport default class login extends Component{\n  \n  constructor(props){\n    super(props);\n    this.state={\n      loading:false,\n      access:'denied',\n      message:'',\n      username:\"\",\n      password:\"\",\n      clicked:true,\n    }\n    this.handleSignupClick= this.handleSignupClick.bind(this);\n    this.ChangeHandler=this.ChangeHandler.bind(this);\n    this.sendLogin=this.sendLogin.bind(this);\n\n  }\n  \n\n\n\n  async sendLogin(event){ //deberia tener await?\n    event.preventDefault();\n    this.setState({loading:true})    \n    let formData = new FormData();\n    formData.append('username', this.state.username)\n    formData.append('password', this.state.password)\n\n\n    var url = 'http://localhost:4500/login.php';\n\n    // var url = 'http://172.19.0.3:4500/login.php';\n\n    await fetch(url, {   \n\n        method: 'POST',\n        headers: \n        {\n            'Access-Control-Allow-Origin': 'http://localhost:4500',\n            'Accept': 'application/json',//'text/plain',\n            'Connection': 'keep-alive',\n        },\n        mode:'cors',\n        Connection:'keep',\n        body:formData,\n        })\n    .then(response => response.json()\n    .then(res=>{\n\n          this.setState({access:res.access});\n          this.setState({message:res.message});\n          this.setState({loading:false});\n          alert(this.state.message);\n        }))\n     .catch(error => {\n      var res={access: false, message: error};\n      this.setState({access:res.access});\n      this.setState({message:res.message});\n      this.setState({loading:false});         \n      alert(this.state.message);\n    }); \n\n\n  };\n      \n  handleSignupClick() {\n  \n    this.setState(state => ({\n\n      clicked: !state.clicked\n    }));\n\n  }\n\n\n  ChangeHandler(event){\n\n\n  \n    this.setState({\n      [event.target.name]:event.target.value\n    })\n    // {this.state.clicked ?  <LoadLogin loadSign={this.handleSignupClick} saveText={this.ChangeHandler} sendLog={this.sendLogin} /> :<LoadSign/>}    \n\n\n\n  }\n\n\n\n\n\n  render(){\n\n    \n  return(\n      <div>\n      {!this.state.clicked ? \n        <LoadSign/>:\n        (this.state.access=='successful'?\n          <div><Home/></div>:\n          <LoadLogin\n          loadSign={this.handleSignupClick}\n          saveText={this.ChangeHandler}\n          sendLog={this.sendLogin}\n          theAccess={this.state.access}\n          /> \n        )}\n\n\n\n      \n\n          \n\n\n      </div>\n\n\n  );\n\n  }\n\n  \n}\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}